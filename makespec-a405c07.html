<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß" />
  <meta name="date" content="2013-08-07 13:45:46 +0200" />
  <title>Creating specifications with makespec</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
</head>
<body>
<a href="https://github.com/jakobib/makespec/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">Creating specifications with makespec</h1>
<h3 class="author">Jakob Voß</h3>
<h4 class="date">2013-08-07 13:45:46 +0200</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#usage"><span class="toc-section-number">2</span> Usage</a><ul>
<li><a href="#setup"><span class="toc-section-number">2.1</span> Setup</a></li>
<li><a href="#workflow"><span class="toc-section-number">2.2</span> Workflow</a></li>
<li><a href="#configuration"><span class="toc-section-number">2.3</span> Configuration</a></li>
<li><a href="#document-variables"><span class="toc-section-number">2.4</span> Document variables</a></li>
<li><a href="#plugins"><span class="toc-section-number">2.5</span> Plugins</a><ul>
<li><a href="#include-plugin"><span class="toc-section-number">2.5.1</span> Include plugin</a></li>
</ul></li>
<li><a href="#requirements"><span class="toc-section-number">2.6</span> Requirements</a></li>
</ul></li>
<li><a href="#examples"><span class="toc-section-number">3</span> Examples</a></li>
<li><a href="#revision-history"><span class="toc-section-number">4</span> Revision history</a></li>
</ul>
</nav>
<h1 id="introduction"><a href="#introduction"><span class="header-section-number">1</span> Introduction</a></h1>
<p><strong>makespec</strong> is a set of rules and templates to manage specifications written in <a href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html">Pandoc Markdown</a>. It consists of a Makefile that generates human-readable documentation (HTML, PDF…) and schema files (OWL, Turtle, Relax-NG, BNF…) from a common source file. The Makefile also supports generating and updating <a href="http://pages.github.com/">GitHub pages</a> to publish the specification at GitHub. Feel free to reuse, <a href="https://github.com/jakobib/makespec/issues">comment</a>, fork, and modify makesec! The current version can be found at <a href="https://github.com/jakobib/makespec">https://github.com/jakobib/makespec</a>.</p>
<h1 id="usage"><a href="#usage"><span class="header-section-number">2</span> Usage</a></h1>
<a id="Setup"></a><h2 id="setup"><a href="#setup"><span class="header-section-number">2.1</span> Setup</a></h2>
<p>Best practice using makedoc is to host your specification in a git repository, optionally published at <a href="http://github.com/">GitHub</a>. Your repository should contain at least:</p>
<ul>
<li>The specification as Pandoc Markdown source file (e.g. <code>myspec.md</code>)</li>
<li><p>A <code>Makefile</code> with basic settings and <a href="#configuration">configuration</a>, such as:</p>
<pre><code>NAME=myspec
GITHUB=https://github.com/myaccount/myspec/

include makespec/Makefile</code></pre></li>
<li><p>A subdirectory <code>makespec</code> containing makespec. Best practice is inclusion as as git submodule. To do so in a new git repository:</p>
<pre><code>git submodule add https://github.com/jakobib/makespec.git</code></pre></li>
</ul>
<p>To clone an existing specification that uses makespace this way:</p>
<pre><code>git clone --recursive http://github.com/myaccount/myspec.git</code></pre>
<p>If you publish the specification as GitHub pages, you should not forget to also clone the <code>gh-pages</code> branch:</p>
<pre><code>git checkout -b gh-pages origin/gh-pages &amp;&amp; git checkout master</code></pre>
<a id="Workflow"></a><h2 id="workflow"><a href="#workflow"><span class="header-section-number">2.2</span> Workflow</a></h2>
<p>Make sure you have the most recent version</p>
<pre><code>git pull origin master gh-pages</code></pre>
<p>Edit the specification source file in Markdown syntax, for instance with vim editor</p>
<pre><code>vim myspec.md</code></pre>
<p>Create a HTML version</p>
<pre><code>make html</code></pre>
<p>Commit to your repository</p>
<pre><code>git add Makefile myspec.md
git commit -m &quot;improved my fancy specification&quot;</code></pre>
<p>Create a <code>gh-pages</code> branch with the HTML version</p>
<pre><code>make website</code></pre>
<p>Publish</p>
<pre><code>git push origin master gh-pages</code></pre>
<a id="Configuration"></a><h2 id="configuration"><a href="#configuration"><span class="header-section-number">2.3</span> Configuration</a></h2>
<dl>
<dt>NAME</dt>
<dd><p>Required short name. Should not contain spaces and similar nasty characters.</p>
</dd>
<dt>SOURCE</dt>
<dd><p>Source file in Pandoc Markdown syntax, set to <code>NAME.md</code> by default.</p>
</dd>
<dt>GITHUB</dt>
<dd><p>Github repository to link to in revision history.</p>
</dd>
<dt>REVISIONS</dt>
<dd><p>Number of revisions to show in the revision history (GIT-CHANGES).</p>
</dd>
<dt>FORMATS</dt>
<dd><p>If your specification contains a RDF ontology written in Turtle syntax, set <code>FORMATS=ttl owl</code>. More formats may be supported in the future.</p>
</dd>
<dt>TITLE</dt>
<dd><p>Title, unless already specified in the source file.</p>
</dd>
<dt>AUTHOR</dt>
<dd><p>List of authors, unless already specified in the source file.</p>
</dd>
<dt>DATE</dt>
<dd><p>Fixed date of publication. Set to a timestamp of the latest commit by default.</p>
</dd>
<dt>ABSTRACT</dt>
<dd><p>A short abstract (in Markdown syntax) which is used as template variable ABSTRACT.</p>
</dd>
<dt>ABSTRACT_FROM</dt>
<dd><p>A file to read abstract from if no ABSTRACT was defined. Set to <code>abstract.md</code> by default.</p>
</dd>
</dl>
<a id="Document variables"></a><h2 id="document-variables"><a href="#document-variables"><span class="header-section-number">2.4</span> Document variables</a></h2>
<p>The following variables, if enclosed in curly brackets (such as <code>{THIS_VARIABLE}</code>) are automatically replaced before conversion from Markdown syntax.</p>
<dl>
<dt>GIT_REVISION_DATE</dt>
<dd><p>timestamp of the latest commit.</p>
</dd>
<dt>GIT_REVISION_HASH</dt>
<dd><p>Short revision hash of the latest commit.</p>
</dd>
<dt>GIT_CHANGES</dt>
<dd><p>Revision history. Length can be set with configuration variable <code>REVISIONS</code>.</p>
</dd>
<dt>GIT_ATOM_FEED</dt>
<dd><p>URL of an Atom feed with revisions at GitHub.</p>
</dd>
<dt>ABSTRACT</dt>
<dd><p>Abstract, if defined with configuration variable <code>ABSTRACT</code> or <code>ABSTRACT_FROM</code>.</p>
</dd>
</dl>
<a id="Plugins"></a><h2 id="plugins"><a href="#plugins"><span class="header-section-number">2.5</span> Plugins</a></h2>
<p>Makespec makes use of several plugins of Pandoc Markdown syntax.</p>
<h3 id="include-plugin"><a href="#include-plugin"><span class="header-section-number">2.5.1</span> Include plugin</a></h3>
<p>One can include markdown files with the following syntax:</p>
<pre><code>`filename.md`{.include}</code></pre>
<p>The inclusion statement should be placed on the begin of a single line. By now, inclusion is implemented on syntax level. A later version of this plugin will act on the abstract syntax tree.</p>
<a id="Requirements"></a><h2 id="requirements"><a href="#requirements"><span class="header-section-number">2.6</span> Requirements</a></h2>
<ul>
<li>GNU Make</li>
<li>Perl &gt;= 5.14.1</li>
<li><a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> version &gt;= 1.9</li>
<li><a href="http://librdf.org/raptor/rapper.html">Rapper</a> from Raptor RDF library (only if writing an RDF ontology)</li>
</ul>
<h1 id="examples"><a href="#examples"><span class="header-section-number">3</span> Examples</a></h1>
<p>The following specifications make use of makespec:</p>
<ul>
<li><a href="https://github.com/gbv/ssso">Simple Service Status Ontology (SSSO)</a></li>
<li><a href="https://github.com/gbv/dso">Document Service Ontology (DSO)</a></li>
<li><a href="https://github.com/gbv/daiaspec">Document Availability Information API (DAIA)</a></li>
<li><a href="https://github.com/gbv/paia">Patrons Account Information API (PAIA)</a></li>
<li>…</li>
</ul>
<p>Last but not least, the documentation of makespec is also created with makespec. <a href="https://github.com/jakobib/makespec/blob/master/README.md">This document</a> was last modified at 2013-08-07 13:45:46 +0200 with hash <a href="https://github.com/jakobib/makespec/commit/a405c07a324467f4a4b9b362ec2dbadcb3a0ce6b">a405c07</a>.</p>
<h1 id="revision-history"><a href="#revision-history"><span class="header-section-number">4</span> Revision history</a></h1>
<p>Also available as <a href="https://github.com/jakobib/makespec/commits/master.atom">Atom feed</a>.</p>
<ul>
<li><a href="makespec-a405c07.html"><code>2013-08-07 13:45:46 +0200</code></a>: <a href="https://github.com/jakobib/makespec/commit/a405c07a324467f4a4b9b362ec2dbadcb3a0ce6b">support PDF export</a></li>
<li><a href="makespec-817fd18.html"><code>2013-07-13 16:16:25 +0200</code></a>: <a href="https://github.com/jakobib/makespec/commit/817fd187fdf2f67e5db0097f9089443adca626f0">include plugin closes issue #11</a></li>
<li><a href="makespec-0bbf9e3.html"><code>2013-07-11 11:08:27 +0200</code></a>: <a href="https://github.com/jakobib/makespec/commit/0bbf9e3fd3bf6a12c4421cf7383b741e179ddf83">refactoring</a></li>
<li><a href="makespec-7f51c28.html"><code>2013-07-11 10:26:26 +0200</code></a>: <a href="https://github.com/jakobib/makespec/commit/7f51c280258833715501a30d0492e0e0c7055103">major refactoring</a></li>
<li><a href="makespec-ae3dd2e.html"><code>2013-05-21 18:24:08 +0200</code></a>: <a href="https://github.com/jakobib/makespec/commit/ae3dd2e99cb3a67ab4b3d7e501222f81dc699c5f">changed document variable syntax to {CURLY_BRACKETS}</a></li>
</ul>
</body>
</html>
